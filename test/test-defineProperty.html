<!--
 * @Author: xujintai
 * @Date: 2021-01-19 18:08:37
 * @LastEditors: xujintai
 * @LastEditTime: 2021-01-20 16:29:49
 * @Description: file content
 * @FilePath: \Vue3\test\test-defineProperty.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script type="module">
    // import defineReactive from './defineReactive'
    // import Observer from './Observer'
    const obj = {
      name: 'xjt',
      obj2: {
        name2: 'xjt666'
      }
    }


    
function defineReactive(target, key, val) {
  if (arguments.length === 2) {
    val=target[key]
  }
  Object.defineProperty(target, key, {
    get() {
      console.log('get:name属性被读取了');
      return val
    },
    set(newValue) {
      console.log('set:name属性被改变了');
      if (val === newValue) {
        return
      }
      val = newValue
    }
  })
} 

defineReactive(obj, 'name')
console.log(obj.name);

  </script>

</body>

</html>